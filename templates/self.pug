extend layout

block title
    title #{title} | Orblr

block script
    script(src='/js/posts.js' defer)

block content
    h1= header
    if posts.length
        div.sort
            if sort == 'likes'
                a(href='/') Newest
                |  | Popular
            else
                | Newest | 
                a(href='?sort=likes') Popular
        each post in posts
            div.post
                h2: a(href!='user/'+post.username)= post.username
                p.date= post.time_posted.toLocaleDateString('en-US', {hour: 'numeric', minute:'numeric'})
                p= post.content
                div.buttons
                    div
                        div.button.like(post_id=post.id class=(post.liked && 'liked'))
                            = post.likes == 1 ? '1 like' : `${post.likes} likes`
                    div
                        div.button.edit(post_id=post.id) Edit
                        div.button.delete(post_id=post.id) Delete
        div.pages
            if prev
                a(href!='?'+prev) prev
                span  | 
            span Page 
            span= pagenum
            if next
                span  | 
                a(href!='?'+next) next
    else
        h2 You don't have any posts yet
